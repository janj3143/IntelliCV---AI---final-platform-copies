version: '3.8'\n\nservices:\n  user_portal:\n    image: your_user_portal_image:latest\n    build:\n      context: ./user_portal\n    ports:\n      - "3000:3000"\n    environment:\n      - BACKEND_URL=http://fastapi_backend:8000\n    networks:\n      - intelli_network\n\n  admin_portal:\n    image: your_admin_portal_image:latest\n    build:\n      context: ./admin_portal\n    ports:\n      - "3001:3001"\n    environment:\n      - BACKEND_URL=http://fastapi_backend:8000\n    networks:\n      - intelli_network\n\n  fastapi_backend:\n    image: your_fastapi_backend_image:latest\n    build:\n      context: ./fastapi_backend\n    ports:\n      - "8000:8000"\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@postgresql:5432/dbname\n      - REDIS_URL=redis://redis:6379\n    networks:\n      - intelli_network\n    depends_on:\n      - postgresql\n      - redis\n\n  postgresql:\n    image: postgres:latest\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n      POSTGRES_DB: dbname\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - intelli_network\n\n  redis:\n    image: redis:latest\n    networks:\n      - intelli_network\n\n  zookeeper:\n    image: wurstmeister/zookeeper:3.4.6\n    ports:\n      - "2181:2181"\n    networks:\n      - intelli_network\n\n  kafka:\n    image: wurstmeister/kafka:latest\n    ports:\n      - "9092:9092"\n    environment:\n      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\n      KAFKA_ADVERTISED_LISTENERS: INSIDE://kafka:9092,OUTSIDE://localhost:9092\n      KAFKA_LISTENERS: INSIDE://0.0.0.0:9092,OUTSIDE://0.0.0.0:9092\n    networks:\n      - intelli_network\n    depends_on:\n      - zookeeper\n\networks:\n  intelli_network:\n    driver: bridge\n\nvolumes:\n  postgres_data: